# 南意秋棠 - 图片添加流程说明

## 📂 图片添加流程

### 1. 图片存放位置
所有图片需要放在：`products/frontend/static/images/` 目录下

### 2. 文件夹结构
每个品牌需要有自己的文件夹，例如：
```
frontend/static/images/
├── 次第春/
│   ├── 次第春(白)-设计图-01.jpeg
│   ├── 次第春(白)-布料图-01.jpeg
│   ├── 次第春(绿)-设计图-01.jpeg
│   └── 次第春(绿)-布料图-01.jpeg
├── 辛夷/
│   ├── 辛夷(蓼蓝)-设计图-01.jpeg
│   └── 辛夷(蓼蓝)-布料图-01.jpeg
└── 新品牌/
    ├── 新品牌-设计图-01.jpeg
    └── 新品牌-布料图-01.jpeg
```

### 3. 文件命名规范
- **设计图**：`品牌名-设计图-01.jpeg` 或 `品牌名(颜色)-设计图-01.jpeg`
- **布料图**：`品牌名-布料图-01.jpeg` 或 `品牌名(颜色)-布料图-01.jpeg`
- **颜色标识**：使用括号包围颜色名，如 `(白)`、`(绿)`、`(蓼蓝)` 等

### 4. 支持的图片格式
- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- BMP (.bmp)
- WebP (.webp)

### 5. 自动扫描机制
系统会自动扫描 `images` 目录下的所有图片：
- ✅ 有图片文件的品牌会自动显示在前端
- ✅ 支持颜色分组显示
- ✅ 支持设计图和布料图分类
- ✅ 支持原图下载功能

### 6. 数据库要求
新品牌需要在数据库中有对应记录，包含：
- `brand_name`：品牌名称（必须与文件夹名完全一致）
- `year`：发布年份
- `material`：材质
- `theme_series`：主题系列
- `print_size`：印制尺寸
- `inspiration_origin`：设计灵感

### 7. 添加新品牌的完整步骤

#### 步骤1：创建图片文件夹
```bash
mkdir "frontend/static/images/新品牌名"
```

#### 步骤2：上传图片文件
将图片文件复制到新创建的文件夹中，确保文件名符合命名规范。

#### 步骤3：添加数据库记录
在数据库的 `products` 表中插入新记录：
```sql
INSERT INTO products (brand_name, year, material, theme_series, print_size, inspiration_origin, title, publish_month)
VALUES ('新品牌名', 2024, '棉麻', '经典系列', '循环印花料', '设计灵感描述', '新品牌名', '2024-01');
```

#### 步骤4：验证显示
刷新前端页面，新品牌应该自动出现在列表中。

### 8. 排序规则
- 品牌按**发布年份倒序**排列（最新的在前面）
- 同年份的品牌按品牌名称排序

### 9. 注意事项
- ⚠️ 品牌名称必须与数据库中的 `brand_name` 字段完全一致
- ⚠️ 文件夹名和数据库记录缺一不可
- ⚠️ 中文字符会自动进行URL编码处理
- ⚠️ 删除图片文件夹后，该品牌会自动从前端隐藏

### 10. 故障排除
如果新添加的图片没有显示：
1. 检查文件夹名是否与数据库中的品牌名一致
2. 检查图片文件格式是否支持
3. 检查文件权限是否正确
4. 刷新浏览器缓存
5. 查看后端日志：`tail -f products/logs/backend.log` 